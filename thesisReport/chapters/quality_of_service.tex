%comment from Manoj
\begin{comment}
try to reference ISO/IEC 9126 for the quality attributes: refer to the slides sent by Manoj on Nov 02
Also include the formula of the metrics and discuss about them and simplify them: refer to the slides sent by Manoj on Nov 02
The quality attributes which can make more sense according to the priority to microservices: refer to the slides sent by Manoj on Nov 02
Relationship between the quality attributes and their tradeoffs, what happens when we try to increase cohesion.. how it affect other attributes?
create wiki page in the sebis page to document the literature review.
\end{comment}

\%comment from Andrea
\begin{comment}
mention about coupling created by calling same database directly by multiple microservice
use the formula to calculate quality metrics for the services at hybris to give an idea about good and bad service, the process of finding out good service at first and then using the quality metrics finding out the range of quality metrics, which can then be used to identify bad services
\end{comment}



\chapter{Quality of Service}\label{chapter:quality_of_service}

\section{Introduction}\label{section:quality_of_service/introduction}
In addition to allign with the business requirements, an important goal of software engineering is to provide high quality. The quality assessment in the context of service oriented product becomes more crucial as the complexity of the system is getting higher by time. \cite{Zhang:2009aa, Goeb:2011aa, Nematzadeh:2014aa} Quality models have been devised over time to evaluate quality of a software. A quality model is defined by quality attributes and quality metrics. Quality attributes are the expected properties of software artifacts defined by the chosen quality model. And, quality metrics give the techniques to measure the quality attributes. \cite{Mancioppi:2015aa} The software quality attributes can again be categorized into two types: internal and external attributes. \cite{Mancioppi:2015aa, Briand:1996aa} The internal quality attributes are the design time attributes which should be fulfilled during the design of the software. Some of the external quality attributes are loose coupling, cohesion, granularity, autonomy etc.\cite{Rostampour:2011aa, Sindhgatta:2015aa, Elhag:2014aa} On the other hand, the external quality attributes are the traits of the software artifacts produced at the end of Software Development Life Cycle \acrshort [{SDLC}]. Some of them are reusability, maintainability etc. \cite{Elhag:2014aa, Mancioppi:2015aa, Feuerlicht:2007aa, Feuerlicht:2013aa} For that reason, the external quality attributes can only be measure after the end of development. However, it has been evident that internal quality attributes have huge impact upon the value of external quality attributes and thus can be used to predict them. \cite{Henry:1990aa, Briand:2015aa, Alshayeb:2003aa, Bingu-Shim:2008aa}The evaluation of both internal and external quality attributes are valuable in order to produce high quality software.\cite{Mancioppi:2015aa, Perepletchikov:2007aa, Mikhail-Perepletchikov:2015aa}

\section{Quality Attributes}\label{section:quality_of_service/quality_attributes}
As already mentioned in section \ref{section:quality_of_service/introduction}, the internal and external qualities determine the overall value of the service composed. There are different researches and studies which have been performed to find the features affecting the service qualities. Based on the published research papers, a comprehensive table \ref{tab:quality_of_service/quality_attributes} has been created. The table provides a minimum list of quality attributes which have been considerd in various research papers. 

  \begin{table}[h!]
  \centering
  \begin{adjustbox}{max width=\textwidth}
  \begin{tabular}{*{14}{|c}|}%%{|c|c|c|c|c|c|c|c|}
  \hline
  \# & Attribute & \cite{Sindhgatta:2015aa} & \cite{Xiao-jun:2015aa} & \cite{Saad-Alahmari:2011aa} & \cite{Bingu-Shim:2008aa} & \cite{Ma:2009aa} & \cite{Feuerlicht:2007aa}\\
  \hline
  \hline
   1 & Coupling & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark\\ 
   2 & Cohesion & \checkmark & X & \checkmark & \checkmark & \checkmark & \checkmark\\
   3 & Autonomy & \checkmark & X & X & X & X & X\\
   4 & Granularity & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark\\
   5 & Reusability & \checkmark & X & X & \checkmark & X & \checkmark\\
   6 & Abstraction & \checkmark & X & X & X & X & X\\
   7 & Complexity & X & X & X & \checkmark & X & X\\
  \hline
\end{tabular}
\end{adjustbox}
  \caption{Quality Attributes}
  \label{tab:quality_of_service/quality_attributes}
\end{table}

The table \ref{tab:quality_of_service/quality_attributes} gives a picture of the studies done so far around service quality attributes. It can be deduced that most of the papers focus on coupling and granularity of the service and only few of them focus on other attributes such as complexity and autonomy.

Coupling refers to the dependency and interaction among services. The interaction becomes inevitable when a service requires a functionality provided by another service in order to accomplish its own goals. Similarly, Cohesion of any system is the extent of appropriate arrangement of elements to perform the functionalities. It affects the degree of understandability and sensibility of its interface for its consumers. Whereas, the complexity attribute provides the way to evaluate the difficulty in understanding and reasoning the context of the service or component.\cite{Elhag:2014aa}
\\
The reusability attribute for a service measures the degree to which it can be used by multiple consumer services and can undergo multiple composition to accoplish various high order functionalities. \cite{Feuerlicht:2007aa}
\\
Autonomy is a broad term which refers to the ability of a service for self-containment, self-controlling, self-governance. Autonomy defines the boundary and context of the service. \cite{Ma:2007aa} Finally, granularity is described in chapter \ref{chapter:granularity} in detail. The basic signifance of granularity is the diversity and size of the functionalities offered by the service. \cite{Elhag:2014aa}

\section{Quality Metrics}\label{section:quality_of_service/quality_metrics}
There have been many studies made to define metrics for quality components.A major portion of the research have been done for object oriented and component based development. These metrics are refined to be used in service oriented systems.\cite{Xiao-jun:2015aa, Sindhgatta:2015aa} Firslty, various papers related to quality metrics of service oriented systems are collected. The papers which conducted their findings or proposition based on quality amount of scientific studies and have produced convincing result are only selected.  Additionally, the evaluation presented in the research papers were only done using the case studies of their own and not real life scenarios. Furthermore, they have used diversity of equations to define the quality metrics. On the basis of case studies made in the papers only, a fair comparision and choice of only one way to evaluate the quality metrics cannot be made. This is further added by the fact that the few papers cover most of the quality metrics, most of them focus on only few quality metrics such as coupling but not all of them focus on all the quality metrics. Nevertheless, they do not discuss about the relationship between all quality metrics. \cite{Elhag:2014aa} This creates difficulty to map all the quality metrics into a common calculation family. 
\\
With such situation, this section will focus on facilitating the understanding of the metrics. Despite the case that there is no idea of threshold value of metrics discussed to define the optimal quality level, the discussed method can still be used to evaualte the quality along various metrics and compare the various design artifacts. This will definitely help to choose the optimum design based on the criteria. Also, there is complexity in understanding and confusion to follow a single proposed metrics procudure. But, the existing procedures can be broken down further to the simple understandable terms. By doing so, the basic terms which are the driving factors for the quality attributes and at the same time followed by most of the procedures as defined in the papers, can be identified.
\\
The remaining part of this section will attempt to collaborate the metrics definitions proposed in various papers, analyze them to identify their conceptual base of measurement in simplest form.

\subsection{Context and Notations}{\label{section:quality_of_service/quality_metrics/context_and_notations}

Before looking into the definitions of metrics, it will help understanding, to know related terms, assumptions and their respective notations. 

\begin{itemize}[leftmargin=.5in]
\item the business domain is realized with various processes defined as $ P = \{p_1, p_2...p_s \} $
\item a set of services realizing the application is defined as $ S = \{s_1, s_2...s_s \} $; $s_s$ is the total number of services in the application
\item for any service $ s \epsilon S$, the set of operations provided by s is given by $O(s) = \{o_1, o_2,...o_o\}$ and $ |O(s)| $ = O
\item if an operation $ o \epsilon O(s) $ has a set of input and output messages given by M(o). Then the set of messages of all operations of the service is given by $ M(s) = \cup_{o \epsilon O(s)} M(o)$
\item the consumers of the service $ s \epsilon S $ is given by $ S_{consumer}(s) = \{ S_{c1}, S_{2},...S{{n_c}\}$; $n_c$ gives the number of consumer services
\item the producers for the service or the number of services to which the given service $ s \epsilon S $ is dependent upon is given by $ S_{producer}(s) = \{ S_{c1}, S_{2},...S{{n_p}\}$; $n_p$ gives the number of producer services
\end{itemize}

\\
%coupling metrics
\subsection{Coupling Metrics}{\label{section:quality_of_service/quality_metrics/coupling}

\cite{Sindhgatta:2015aa} defines following metrics to determine coupling
$$ \acrshort{SOCI}(s) = | \{ o_{i} \epsilon s_{i}: \exists_{o \epsilon s} calls(o, o_{i}) \wedge s \neq s_{i} \} | $$

$$ \acrshort{ISCI}(s) = | \{ s_{i} : \exists_{o \epsilon s}, \exists_{o_{i} \epsilon s_{i}} calls(o, o_{i}) \wedge s \neq s_{i} \} | $$

$$ \acrshort{SMCI}(s) = | \cup M (o_{i}) : ( o_{i} \epsilon s_{i}) \vee ( \exists_{o \epsilon s}, \exists_{o_{i} \epsilon s_{i} } calls(o, o_{i}) \wedge s \neq s_{i} ) | $$

where, \\
\begin{itemize}[leftmargin=.5in]
\item $ call(o, o_i) $ represents the call made from service 'o' to service '$o_i$'
\end{itemize}
\\
\cite{Xiao-jun:2015aa} defines 
$$Coupling(S_i) =  p \sum_{j=1}^{n_s} (-log(P_L(j)))$$
$$= \frac{1}{n} \sum_{j=1}^{n_s} (-log(P_L(j)))$$

where, \\
\begin{itemize}[leftmargin=.5in]
\item $n_s$ is the total number of services connected
\item 'n' is the total number of services in the entire application
\item $p = \frac{1}{n}$ gives the probability of a service participating in any connection
\end{itemize}
\\
\cite{Kazemi:2011aa} defines
$$Coupling = \frac{\sum_{i \epsilon D_s} \sum_{k \epsilon O(s)}CCO(i,k)}{|O(s)|.K}$$
where, \\
\begin{itemize}[leftmargin=.5in]
\item $D_s = \{ D_1, D_2,...D_k \}$ is set of dependencies the service has on other services
\item $ k = |D_s| $
\item CCO is Conceptual Coupling betweeen service operations and obtained from CRUD matrix table constructed with business entities and business capabilities
\end{itemize}

\cite{Bingu-Shim:2008aa} defines
$$coupling(s) =  \frac{n_c + n_p}{n_s}$$

\cite{Saad-Alahmari:2011aa} defines
$$coupling = \frac{\sum_{i=1}^{|O(s)|} (S_{i,sync} + S_{i,async})}{|S|}$$
\\
where,
\\
\begin{itemize}[leftmargin=.5in]
\item $S_{i,sync}$ is the synchronous invocation in the operation $O_i$
\item $S_{i,async}$ is the asynchronous invocation in the operation $O_i$
\end{itemize}


\begin{table}[h]
  \centering
  \begin{adjustbox}{max width=\textwidth}
  \normalsize
  \begin{tabular}{*{14}{|c}|}%%{|c|c|l|}
  \hline
  \# & Papers & Metrics Definition \\
  \hline
  \hline
   1 & \cite{Sindhgatta:2015aa} & 
                    \begin{tabular}{cl}
                    \multirow{6}{*}
                    &\acrshort{SOCI} : number of operation of other services \\
                    &invoked by the given service\\
                    &\acrshort{ISCI} : number of services invoked \\
                    &by a given service\\
                    &\acrshort{SMCI} : total number of messages from \\
                    &information model required by the operations\\
                    \end{tabular}\\
                    \hline
   2 & \cite{Xiao-jun:2015aa} &
                    \begin{tabular}{cl}
                    \multirow{6}{*}
                    &Coupling is evaluated as information entropy \\
                    &of a complex service\\
                    &component where entropy is calculated using various \\
                    &data such as total number of atomic components connected, \\
                    &total number of links to atomic \\ 
                    &components and total number of atomic components\\
                    \end{tabular}\\
                    \hline
   3 & \cite{Kazemi:2011aa} & 
                    \begin{tabular}{cl}
                    \multirow{7}{*}
                    &The coupling is measured by using the dependency \\
                    &of a service operations with operations of other \\
                    &services. Additionally, the dependency is considered \\
                    &to have different weight value for each kind of operation \\
                    &such as Create, Read, Update, Delete (CRUD) and based on \\
                    &the type of business entity involved. The weight is \\
                    &referred from the CRUD matrix constructed in the process.\\
                    \end{tabular}\\
                    \hline
   4 & \cite{Bingu-Shim:2008aa} & 
                    given by the average number of directly connected services\\
  \hline
   5 & \cite{Saad-Alahmari:2011aa} & 
                    \begin{tabular}{cl}
                    \multirow{2}{*}
                    &defines coupling as the average number of synchronous and \\
                    &asynchronous invocations in all the operations of the service\\
                    \end{tabular}\\
                    \hline
\end{tabular}
\end{adjustbox}
  \caption{Coupling Metrics}
  \label{tab:quality_of_service/quality_attributes/coupling_metrics}
\end{table}
\\
The table \ref{tab:quality_of_service/quality_attributes/coupling_metrics} shows simpler form of metrics proposed for coupling. Although, the table shows different way of evaluating coupling, they somehow agree to the basic metrics to calculate coupling. It can be deduced that the metrics to evaluate coupling uses basic metrics such as number of operations, number of provider services and number of messages.
\\

%cohesion metrics
\subsection{Cohesion Metrics}{\label{section:quality_of_service/quality_metrics/cohesion}

\cite{Sindhgatta:2015aa} defines following metric for cohesion.
$$ \acrshort{SFCI}(s) = \frac{max (\mu(m) )}{|O(s)|} $$
\\
where,
\\
\begin{itemize}[leftmargin=.5in]
\item the number of operations using a message 'm'  is $\mu(m)$ such that $ m \epsilon M(s) $ and |O(s)| > 0
%principle
\\The service is considered highly cohesive if all the operations use one common message. This implies that a higly cohesive  service operates on a small set of key business entities as guided by the messages and are  relavant to the service and all the operations operate on the same set of key business entities. \cite{Sindhgatta:2015aa}
\end{itemize}

\cite{Bingu-Shim:2008aa} defines
$$ cohesion =  \frac{n_s}{|M(s)|}$$

\cite{Perepletchikov:2007aa} defines

$$ \acrshort{SIDC} = \frac{ n_{op} }{n_{pt}} $$

$$ \acrshort{SIUC} = \frac{n_{oc}}{n_c * |O(s)|}$$

$$ \acrshort{SSUC} = \frac{n_{so}}{n_c * |O(s)|}$$

\\where,
\begin{itemize}[leftmargin=.5in]
\item $n_{op}$ is the number of operations in the service which share the same parameter types
\item $n_{pt}$ is the total number of distinct parameter types in the service
\item $n_{oc}$ is the total number of operations in the service used by consumers
\item $n_{so}$ is the total number of sequentially accessed operations by the clients of the service
\end{itemize}
\cite{Saad-Alahmari:2011aa} defines
$$ cohesion = \frac{max(\mu(\acrshort{OFG}, \acrshort{ODG}))}{|O(s)|} $$

\\
where,
\\
\begin{itemize}[leftmargin=.5in]
\item \acrshort{OFG} and \acrshort{ODG} are Operation Gunctionality Granularity and Operation Data Granularity respectively as calculated in section \ref{section:quality_of_service/quality_metrics/granularity}
\item $\mu(\acrshort{OFG}, \acrshort{ODG})$ gives the number of operations with specific value of \acrshort{OFG} and \acrshort{ODG}
\end{itemize}

\begin{table}[h]
  \centering
  \begin{adjustbox}{max width=\textwidth}
  \begin{tabular}{*{14}{|c}|}%%{|c|c|l|}
  \hline
  \# & Papers & Metrics Definition \\
  \hline
  \hline
   1 & \cite{Sindhgatta:2015aa} & 
                    \begin{tabular}{cl}
                    \multirow{3}{*}
                    &defines \acrshort{SFCI} which measures the fraction of operations \\
                    &using similar messages out of total  number of operations in the \\
                    &service operations of the service\\
                    \end{tabular}\\
                    \hline
   2 & \cite{Perepletchikov:2007aa} &
                    \begin{tabular}{cl}
                    \multirow{8}{*}
                    &\acrshort{SIDC} : defines cohesiveness as the fraction of operations \\
                    &based on commonality of the messages they operate on\\
                    &\acrshort{SIUC} : defines the degree of consumption pattern of \\
                    &the service operations which is based on the similarity of consumers\\
                    &of the operations\\ 
                    &\acrshort{SSUC} : defines the cohesion based on the sequential\\
                    &consumption behavior of more than one operations of a service by\\
                    &other services\\
                    \end{tabular}\\
                    \hline
   3 & \cite{Bingu-Shim:2008aa} & 
                    \begin{tabular}{cl}
                    \multirow{2}{*}
                    &cohesion is given by the inverse of average number of consumed \\
                    &messages by a service\\
                    \end{tabular}\\
                    \hline
   4 & \cite{Saad-Alahmari:2011aa} & 
                    \begin{tabular}{cl}
                    \multirow{4}{*}
                    &cohesion is defined as the consensus among the operations of \\
                    &the service regarding the functionality and data granularity \\
                    &which represents the type of parameters and the operations \\
                    &importance as calculated in the section
                    \ref{section:quality_of_service/quality_metrics/granularity}\\
                    \end{tabular}\\
                    \hline
\end{tabular}
\end{adjustbox}
  \caption{Cohesion Metrics}
  \label{tab:quality_of_service/quality_attributes/cohesion_metrics}
\end{table}
\\
The table \ref{tab:quality_of_service/quality_attributes/cohesion_metrics} gives simplified view for the cohesion metrics. The papers presented agree on some basic metrics such as similarity of the operation usage behavior, commanility in the messages consumed by operations and similarity in the size of operations.
\\


%granularity metrics
\subsection{Granularity Metrics}{\label{section:quality_of_service/quality_metrics/granularity}

\cite{Sindhgatta:2015aa} defines
$$ \acrshort{SCG} = |O(s)| $$ 
$$ \acrshort{SDG} = |M(s)| $$

\cite{Bingu-Shim:2008aa} defines
$$ granularity = \frac{|O(s)|^2}{|M(s)|^2}$$

\cite{Saad-Alahmari:2011aa} defines

$$ ODG = 1 - \bigg( \frac{ \sum_{i=1}^{n_io} W_{pi}}{ \sum_{i=1}^{n_is} W_{pi}} + \frac{\sum_{j=1}^{n_jo} W_{pj}}{ \sum_{j=1}^{n_js} W_{pj}} \bigg)$$

$$ OFG = \frac{W_i(o)}{ \sum_{i=1}{|O(S)|}W_i(o)}$


$$ SOG = \sum_{i=1}^{|O(S)|} ODG(i) * OFG(i) $$
\\
where,
\\
\begin{itemize}[leftmargin=.5in]
\item $W_{pi}$ is the weight of input parameter
\item $W_{pj}$ is the weight of output parameter
\item $n_io$ is the number of input parameters in an operation
\item $n_jo$ is the number of output parameters in an operation
\item $n_is$ is the total number of input parameters in the service
\item $n_js$ is the total number of output parameters in the service
\item $W_i(o)$ is the weight of an operation of the service
\item $ |O(S)| $ is the number operations in the service
\end{itemize}

\begin{table}[h!]
  \centering
  \begin{adjustbox}{max width=\textwidth}
  \begin{tabular}{*{14}{|c}|}%%{|c|c|l|}
  \hline
  \# & Papers & Metrics Definition \\
  \hline
  \hline
   1 & \cite{Sindhgatta:2015aa} & 
                    \begin{tabular}{cl}
                    \multirow{3}{*}
                    &the service capability granularity is given by the number of\\
                    &operations in a service and the data granularity by the\\ 
                    &number of messages consumed by the operations of the service\\
                    \end{tabular}\\
                    \hline
   2 & \cite{Saad-Alahmari:2011aa} &
                    \begin{tabular}{cl}
                    \multirow{8}{*}
                    &\acrshort{ODG} : evaluated in terms of number of input and\\
                    &output parameters and their type such as simple,\\ 
                    &user-defined and complex\\
                    &\acrshort{OFG} : defined as the level of logic provided by\\
                    &the operations of the services\\
                    &\acrshort{SOG} : defined by the sum of product of data \\
                    &granularity and functionality granularity for all operations\\
                    &in the service\\
                    \end{tabular}\\
                    \hline
   3 & \cite{Bingu-Shim:2008aa} & 
                    \begin{tabular}{cl}
                    \multirow{3}{*}
                    &evaluated as the ratio of squared number of operations of\\
                    &the service to the squared number of messages consumed by\\ 
                    &the service\\
                    \end{tabular}\\
                    \hline
\end{tabular}
\end{adjustbox}
  \caption{Granularity Metrics}
  \label{tab:quality_of_service/quality_attributes/granularity_metrics}
\end{table}
\\
The table \ref{tab:quality_of_service/quality_attributes/granularity_metrics} presents various view of granularity metrics based on different research papers. The chapter \ref{chapter:granularity} discuss in detail regarding the topic. Based on the table \ref{tab:quality_of_service/quality_attributes/granularity_metrics}, the granularity is evaluated using some basic metrics such as the number and type of the parameters, number of operations and number of messages consumed.
\\

%Complexity metrics
\subsection{Complexity Metrics}{\label{section:quality_of_service/quality_metrics/complexity}

\cite{Zhang:2009aa} defines
$$ \acrshort{RCS} = \frac{CS(s_i)}{|S|}$$
$$ \acrshort{RIS} = \frac{IS(s_i)}{|S|}$$
\\
where,
\\
\begin{itemize}[leftmargin=.5in]
\item $CS(s_i)$ gives coupling value of a service
\item $IS(s_i)$ gives importance weight of a service in an application
\item |S| is the number of services to realize the application
\end{itemize}

The complexity is rather given by relative coupling than by coupling on its own. A low value of RCS indicates that the coupling is lower than the count of services where as RCS with value 1 indicates that the coupling is equal to the number of services. This represents high amount of complexity.
\\
Similarly, a high value of RIS indicates that a lot of services are dependent upon the service and the service of critical value for them. This increases complexity as any changes or problem in the service affects a large number of services to a high extent.
\\
\cite{Saad-Alahmari:2011aa} defines
$$ Complexity(s) = \frac{\sum_{i=1}^{|O(s)|}(SOG(i))^2}{|S|}$$
\\
where,
\\
\begin{itemize}[leftmargin=.5in]
\item |S| is the number of services to realize the application
\item SOG(i) gives the granularity of ith service calculated as described in section \ref{section:quality_of_service/quality_metrics/granularity}
\end{itemize}

refer to the document for effect of RCS and RIS on complixity

\begin{table}[h!]
  \centering
  \begin{adjustbox}{max width=\textwidth}
  \begin{tabular}{*{14}{|c}|}%%{|c|c|l|}
  \hline
  \# & Papers & Metrics Definition \\
  \hline
  \hline
   1 & \cite{Zhang:2009aa} & 
                    \begin{tabular}{cl}
                    \multirow{6}{*}
                    &\acrshort{RCS} : complexity given by the degree of coupling\\ 
                    &for a service and evaluated as the fraction of its coupling\\
                    &to the total number of services\\
                    &\acrshort{RIS} : measured as the fraction of total \\
                    &dependency weight of consumers upon the service to the total\\
                    &number of services\\
                    \end{tabular}\\
                    \hline
   2 & \cite{Saad-Alahmari:2011aa} & 
                    \begin{tabular}{cl}
                    \multirow{2}{*}
                    &the complexity is calculated using the granunarity of service\\
                    &operations\\
                    \end{tabular}\\
  \hline
\end{tabular}
\end{adjustbox}
  \caption{Complexity Metrics}
  \label{tab:quality_of_service/quality_attributes/complexity_metrics}
\end{table}
\\
The table \ref{tab:quality_of_service/quality_attributes/complexity_metrics} provides the way to interprete complexity metrics. The complexity is highly dependent upong coupling and functionality granularity of the service.
\\
%Autonomy metrics
\subsection{Autonomy Metrics}{\label{section:quality_of_service/quality_metrics/autonomy}
\cite{Rostampour:2011aa} defines

$$ SLC = \frac{1}{h_2 - l_2 + 1} \sum_{i= l_2}^{h_2} \sum_{sr \epsilon SR} (BE_{i,sr} X V_{sr})$$


$$ DEP = \frac{\sum_{j=L1_i}^{h1_i} \sum_{k=1}^{BE} V_{sr_{jk}} - \sum_{j=L1_i}^{h1_i} \sum_{k=L2_i}^{j2_i} V_{sr_{jk}} }{nc}$$

$$
\mbox{autonomy}=\left\{
\begin{array}{rl}
\acrshort{SLC} - \acrshort{DEP} & \mbox{if SLC > DEP} \\
0 & \mbox{otherwise}
\end{array} \right.
$$

\\
where,
\\
\begin{itemize}[leftmargin=.5in]
\item nc is the number of relations with other services
\item $ V_{sr_{jk} $ is the corresponding value of the action in jkth element of CRUD matrix, it gives the weight of corresponding business capability affecting a business entity
\item $ l1_i, h1_i, l2_i, h2_i$ are bounding indices in CRUD matrix of ith service
\end{itemize}
 
\begin{table}[h!]
  \centering
  \begin{adjustbox}{max width=\textwidth}
  \begin{tabular}{*{14}{|c}|}%%{|c|c|l|}
  \hline
  \# & Papers & Metrics Definition \\
  \hline
  \hline
   1 & \cite{Rostampour:2011aa} & 
                   \begin{tabular}{cl}
                    \multirow{6}{*}
                    &\acrshort{SLC} : defined as the degree of control of a \\
                    &service upon its operations to act on its Business entities only\\
                    &\acrshort{DEP} : given by the degree of coupling of the given \\
                    &service with other services\\
                    &autonomy is given by the difference of \acrshort{SLC} and \acrshort{DEP}\\
                    &if SLC > DEP else it is taken as 0\\
                    \end{tabular}\\
                    \hline
\end{tabular}
\end{adjustbox}
  \caption{Autonomy Metrics}
  \label{tab:quality_of_service/quality_attributes/autonomy_metrics}
\end{table}
\\
The table \ref{tab:quality_of_service/quality_attributes/autonomy_metrics} shows a way to interprete autonomy. It is calculated by the difference \acrshort{SLC}-\acrshort{DEP} when \acrshort{SLC} is greater than \acrshort{DEP}. In other cases it is taken as zero. So, autonomy increases as the operations of the services have full control upon its business entities but decreases if the service is dependent upon other services.
\\
%Reusability metrics
\subsection{Reusability Metrics}{\label{section:quality_of_service/quality_metrics/reusability}
\cite{Sindhgatta:2015aa} defines

$$ SRI(s) = P + Q $$ where,
$$ P = | \{ s_{i} : \exists_{o \epsilon s} , \exists_{o_{i} \epsilon s_{i}} calls(o_{i}, o) \wedge s \neq s_{i}} \}|$$ and
$$ Q = |\{ p \epsilon P : s \epsilon p \}|$$

\\ \cite{Bingu-Shim:2008aa} defines 
$$Reusability= \frac{Cohesion - granularity + Consumability - coupling}{2}$$
\begin{table}[h!]
  \centering
  \begin{adjustbox}{max width=\textwidth}
  \begin{tabular}{*{14}{|c}|}%%{|c|c|l|}
  \hline
  \# & Papers & Metrics Definition \\
  \hline
  \hline
   1 & \cite{Sindhgatta:2015aa} & 
                    \begin{tabular}{cl}
                    \multirow{2}{*}
                    &\acrshort{SRI} defines reusability as the number of existing\\ 
                    &consumers of the service\\
                    \end{tabular}\\
                    \hline
   2 & \cite{Bingu-Shim:2008aa} & 
                    \begin{tabular}{cl}
                    \multirow{4}{*}
                    &evaluated from coupling, cohesion, granularity and \\
                    &consumability of a service where consumability is the chance \\
                    &of the service being discovered and depends upon the fraction\\
                    &of operations in the service\\
                    \end{tabular}\\
                    \hline
                    \end{tabular}
\end{adjustbox}
  \caption{Reusability Metrics}
  \label{tab:quality_of_service/quality_attributes/reusability_metrics}
\end{table}
\\
The table \ref{tab:quality_of_service/quality_attributes/reusability_metrics} shows the reusability metrics evaluation. Reusability depends upon coupling, cohesion and granularity. It decreases as coupling and granularity increases.
\\


%Basic Metrics
\section{Basic Quality Metrics}{\label{section:quality_of_service/basic_quality_metrics}
The section \ref{section:quality_of_service/quality_metrics} presents various metrics to evaluate quality attributes based upon different papers. Additionally, the section analyzed the metrics and tried to derive them in simplest form possible. Eventually, the tables demonstrating the simplest definition of the metrics shows that the different quality attributes are measured on the basis of some basic metrics. Based on the section \ref{section:quality_of_service/quality_metrics} and based on the papers, this section will attempt to derive basic metrics.
\\

\begin{table}[h!]
  \centering
  \begin{adjustbox}{max width=\textwidth}
  \begin{tabular}{*{14}{|c}|}%%{|c|l|c||c||c||c||c||c|}
  \hline
  \# & Metrics & \begin{sideways}Coupling\end{sideways}
  &  \begin{sideways}Cohesion\end{sideways}
  & \begin{sideways}Granularity\end{sideways}
  & \begin{sideways}Complexity\end{sideways} 
  & \begin{sideways}Autonomy\end{sideways}
  & \begin{sideways}Reusability\end{sideways} \\
  \hline
  \hline
    1 & number of service operations invoked by the service 
     & +
     & X
     & X
     & +
     & -
     & -\\
                    \hline
    2 & number of operation using similar messages
     & X
     & +
     & X
     & X
     & X
     & +\\
\hline
    3 & number of operation used by same consumer
     & X
     & +
     & X
     & X
     & X
     & +\\
     \hline
    4 & number of operation using similar parameters
     & X
     & +
     & X
     & X
     & X
     & +\\
     \hline
    5 & number of operation with similar scope or capability
     & X
     & +
     & X
     & X
     & X
     & +\\
     \hline
    6 & scope of operation
     & X
     & X
     & +
     & +
     & X
     & -\\
     \hline
     7 & number of operations
     & X
     & X
     & +
     & +
     & X
     & -\\
     \hline
     8 & number of parameters in operation
     & X
     & X
     & +
     & +
     & X
     & -\\
     \hline
    9 & type of parameters in operation
     & X
     & X
     & +
     & +
     & X
     & -\\
     \hline
     10 & number and size of messages used by operations
     & +
     & X
     & +
     & +
     & -
     & -\\
     \hline
     11 & type of messages used by operations
     & X
     & +
     & X
     & X
     & X
     & +\\
     \hline
     12 & number of consumer services
     & +
     & X
     & X
     & +
     & -
     & +\\
     \hline
     13 & number of producer services
     & +
     & X
     & X
     & +
     & -
     & -\\
     \hline
     14 & type of operation and business entity invoked by the service
     & +
     & X
     & X
     & +
     & -
     & -\\
     \hline
     15 & number of consumers accessing same operation
     & X
     & +
     & X
     & X
     & X
     & +\\
     \hline
     16 & number of consumer with similar operation usage sequence
     & X
     & +
     & X
     & X
     & X
     & +\\
     \hline
     17 & dependency degree or imporance of service operation to other service
     & X
     & X
     & X
     & +
     & X
     & X\\
     \hline
     18 & degree of control of operation to its business entities
     & X
     & X
     & X
     & X
     & +
     & X\\
     \hline
     \hline
\end{tabular}
\end{adjustbox}
  \caption{Basic Quality Metrics}
  \label{tab:quality_of_service/quality_attributes/basic_quality_metrics}
  \\
  Moreover, the effect of the basic metrics upon various quality attributes are also evaluated.
  Here, the meaning of the various symbols to demonstrate the affect are as given below:
  \\
\begin{itemize}[leftmargin=.5in]
\item + the basic metric affect the quality attribute proportionlly
\item - the basic metric inversely affect the quality attribute
\item X there is no evidence found regarding the relationship from the papers
\end{itemize}
\end{table}


%principles based on quality quality attributes
\section{Principles defined by Quality Attributes}{\label{section:quality_of_service/quality_attributes_principle}
The section \ref{section:quality_of_service/introduction} has already mentioned that there are two distinct kind of quality attributes: external and internal. The external quality attributes cannot be evaluated during design however can be predicted using the internal quality attributes. This kind of relationship can be used to design service with good quality. Moreover, it is important to identify how each internal attributes affect the external attributes. The understanding of such relationship will be helpful to identify the combined effect of the quality attributes and eventually to identify the service with the appropriate level of quality as per the requirement.
The remaining part of the section lists relationship existing in various quality attributes as well as the desired value of the quality attributes.
\begin{enumerate}
\item When a service has large number of operations, it means it has large number of consumers. It will highly affect maintainability because a small change in the operations of the service will be propagated to large number of consumers. But again, if the service is too fine granular, there will be high network coupling. \cite{Feuerlicht:2007aa, Xiao-jun:2015aa}

\item Low coupling improves understandability, reusability and scalability where as high coupling decreases maintainability. \cite{Kazemi:2011aa}\cite{Erl:2005aa}\cite{Josuttis:2007aa}

\item A good strategy for grouping operations to realize a service is to combine the ones those are used together.  This indicates that most of the operations are used by same client.  It highly improves maintainability by limiting the number of affected consumer in the event of any change in the service. \cite{Xiao-jun:2015aa}

\item A high cohesive quality attribute defines a good service. The service is easy to understand, test, change and is more stable. These properties highly support maintainability. {enumerate}\cite{np:2001aa}

\item A service with operations those are cohesive and have low coupling which make the service reusable. \cite{Washizakia:2003aa}\cite{Feuerlicht:2007aa}\cite{Ma:2009aa}

\item Services must be selected in a way so that they focus on a single business functionality. This highly follows the concept of low coupling. \cite{Perepletchikov:2007aa}\cite{Sindhgatta:2015aa}

\item Maintainability is divided into four distinct concepts:  analyzability, changeability, stability and testability.\cite{np:2001aa} A highly cohesive and low-coupled design should be easy to analyze and test. Moreover,  such a system will be stable and easy to change.\cite{Perepletchikov:2007aa}


\item The complexity of a service is determined by granularity. A coarse-grained service has higher complexity. However, as the size of the service decreases, the complexity of the over system governance also increases.
\cite{Saad-Alahmari:2011aa}

\item The complexity depends upon coupling. The complexity of a service is defined in terms of the number of dependencies of a service, number of operations as well as number and size of messages used by the service operations.\cite{Saad-Alahmari:2011aa}\cite{Sindhgatta:2015aa}\cite{Lee:2001aa}

\item The selection of an appropriate service has to deal with multi-objective optimization problem.  The quality attributes are not independent in all aspects. Depending upon goals of the architecture, tradeoffs have to be made for mutually exclusive attributes. For example, when choosing between coarse-grained and fine-grained service, various factors such as governance, high network roundtrip etc. also should be considered. 
\cite{Jamshidi:2008aa}

\item Business entity convergence of a service, which is the degree of control over specific business entities, is an important quality for the selection of service. For example: It is be better to create a single service to create and update an order. In that way change and control over the business entity is localized to a single service.\cite{Ma:2009aa}

\item Increasing the granularity decreases cohesion but also decreases the amount of message flow across the network. This is because, as the boundary of the service increases, more communication is handled within the service boundary. However, this can be true again only if highly related operations are merged to build the service. This suggests for the optimum granularity by handling cohesion and coupling in an appropriate level.\cite{Ma:2009aa}

\item As the scope of the functionality provided by the service increases, the reusability decreases.
\cite{Feuerlicht:2007aa}
\end{enumerate}


%relationship between quality attributes and tradeoffs
\section{Relationship among Quality Attributes}{\label{section:quality_of_service/quality_attributes_relationship}
In order to determine the appropriate level of quality for a service, it is also important to know the relationship between the quality attributes. This knowledge will helpfull to decide tradeoffs among them in the situation when it is not possible to achieve best of all. Based on the section \ref{section:quality_of_service/quality_attributes} and section \ref{section:quality_of_service/quality_attributes_principle}, the identified relationship among the quality attributes are shown in the table \ref{tab:quality_of_service/quality_attributes/quality_attributes_relationship}.

\begin{table}[h!]
  \centering
  \begin{adjustbox}{max width=\textwidth}
  \begin{tabular}{*{14}{|c}|}%%{|c|c|c|c|c|}
  \hline
  \# & Quality Attributes & Coupling & Cohesion & Granularity \\
  \hline
  \hline
   1 & Coupling         &   & - & + \\ \hline
   2 & Cohesion         & - &   & X \\ \hline
   3 & Granularity      & + & X &   \\ \hline
   4 & Complexity       & + & X & + \\ \hline
   5 & Reusability      & - & + & - \\ \hline
   6 & Autonomy         & - & X & X \\ \hline
   7 & Maintainability  & - & + & X \\ \hline
   \hline
   \end{tabular}
\end{adjustbox}
  \caption{Relationship among quality attributes}
  \label{tab:quality_of_service/quality_attributes/quality_attributes_relationship}
\end{table}

Here, the meaning of the various symbols showing nature of relationship are as given below:
  \\
\begin{itemize}[leftmargin=.5in]
\item + the quality attribute on the column affects the quality attribute on the corresponding row positively
\item - the quality attribute on the column affects the quality attribute on the corresponding row inversely
\item X there is no enough evidence found regarding the relationship from the papers
\end{itemize}
%where are we on the map ISO/IEC 9126
%quality attrubutes priority for microservices

